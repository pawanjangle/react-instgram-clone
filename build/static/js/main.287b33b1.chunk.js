(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,a){},36:function(e,t,a){e.exports=a(65)},45:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),l=a(23),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETUSER":return{user:t.payload,authenticated:!0};case"CLEAR":return Object(l.a)(Object(l.a)({},e),{},{authenticated:!1,user:null});default:return e}},i=a(34),s=Object(o.c)(c,Object(o.a)(i.a)),u=a(6),m=a(17),d=a.n(m),p=(a(45),a(5)),f=a(3),h=(a(25),function(){var e=Object(u.b)(),t=Object(p.f)(),a=Object(u.c)((function(e){return e.user}));return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper white"},r.a.createElement(f.b,{to:a?"/":"/login",className:"brand-logo left"},"Instagram"),r.a.createElement("ul",{id:"nav-mobile",className:"right"},a?[r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(f.b,{to:"/profile"},"Profile")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/create"},"create Post")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/allposts"},"All posts")),r.a.createElement("li",null,r.a.createElement("button",{className:" btn #000000 black ",onClick:function(){localStorage.clear(),e({type:"CLEAR"}),t.push("/login")}},"Logout")))]:[r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(f.b,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/signup"},"Sign Up")))]))))}),g=a(1),E=a(4),b=a.n(E),v=function(){var e=Object(u.c)((function(e){return e.user})),t=Object(n.useState)([]),a=Object(g.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(g.a)(c,2),s=i[0],m=i[1];Object(n.useEffect)((function(){fetch("/allposts",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){l(e.posts)}))}),[o,s]);return r.a.createElement("div",{className:"container"},o?o.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card home-card",key:t._id},r.a.createElement("h5",{style:{paddingTop:"10px",paddingBottom:"10px"}},r.a.createElement(f.b,{to:t.postedBy._id!==e._id?"/profile/".concat(t.postedBy._id):"/profile"},t.postedBy.name),t.postedBy._id==e._id&&r.a.createElement("i",{class:"material-icons",style:{float:"right"},onClick:function(){return e=t._id,void fetch("/deletepost/".concat(e),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var t=o.filter((function(t){return t._id!==e.result._id}));l(t),b.a.toast({html:e.message,classes:"#ff1744 red accent-3"})}));var e}},"delete")),r.a.createElement("div",{className:"card-image"},r.a.createElement("img",{style:{height:"500px"},src:t.photo,alt:""})),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",paddingTop:"5px"}},t.likes.includes(e._id)?r.a.createElement("i",{className:"material-icons",onClick:function(){var e;e=t._id,fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(t){var a=o.map((function(a){return e===t._id?t:a}));l(a)}))}},"thumb_down"):r.a.createElement("i",{className:"small material-icons",onClick:function(){return e=t._id,void fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=o.map((function(t){return t._id===e._id?e:t}));l(t)})).catch((function(e){return console.log(e)}));var e}},"thumb_up"),r.a.createElement("div",{style:{paddingLeft:"10px"}},t.favorites.includes(e._id)?r.a.createElement("i",{className:"small material-icons",style:{color:"red"},onClick:function(){return e=t._id,void fetch("/removefromfavorite",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){m(!1),b.a.toast({html:e.message,classes:"#ff1744 red accent-3"})}));var e}},"favorite"):r.a.createElement("i",{className:"small material-icons",onClick:function(){return e=t._id,void fetch("/addtofavorite",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){m(!0),b.a.toast({html:e.message,classes:"#ff1744 green accent-3"})}));var e}},"favorite"))),r.a.createElement("h6",null,t.likes.length," Likes"),r.a.createElement("h6",null,t.title),r.a.createElement("p",null,t.body),t.comments.map((function(e){return r.a.createElement("h6",{key:e._id},r.a.createElement("span",{style:{fontWeight:"500"}},e.postedBy)," ",r.a.createElement("span",null),e.text)})),r.a.createElement("form",{onSubmit:function(e){var a,n;e.preventDefault(),a=e.target[0].value,n=t._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:n,text:a})}).then((function(e){return e.json()})).then((function(e){var t=o.map((function(t){return t._id==e._id?e:t}));l(t)}))}},r.a.createElement("input",{type:"text",placeholder:"add a comment"})))))})):"loading")},j=a(13),y=a.n(j),w=function(){var e=Object(p.f)(),t=Object(n.useState)(""),a=Object(g.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(g.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(g.a)(m,2),h=d[0],E=d[1];return r.a.createElement("div",{className:"my-card"},r.a.createElement("div",{className:"card auth-card input-field"},r.a.createElement("h2",{className:"brand-logo"},"Instagram"),r.a.createElement("input",{type:"text",placeholder:"Name",value:o,onChange:function(e){return l(e.target.value)}}),r.a.createElement("input",{type:"text",placeholder:"email",value:h,onChange:function(e){return E(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"password",value:s,onChange:function(e){return u(e.target.value)}}),r.a.createElement("a",{className:"waves-effect waves-light btn 64b5f6 blue lighten-2 white-text",onClick:function(){return function(){var t={name:o,email:h,password:s};y.a.post("/signupuser",t).then((function(t){console.log(t),t.data.message?(b.a.toast({html:t.data.message,classes:"#ff1744 green accent-3"}),e.push("/login")):b.a.toast({html:t.data.error,classes:"#ff1744 red accent-3"})}))}()}},"Signup"),r.a.createElement("h5",null,r.a.createElement(f.b,{to:"/login"},"Already have an Account ?"))))},O=function(){var e=Object(p.f)(),t=Object(n.useState)(""),a=Object(g.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(g.a)(c,2),s=i[0],m=i[1],d=Object(n.useState)(""),h=Object(g.a)(d,2),E=(h[0],h[1],Object(u.b)());return r.a.createElement("div",{className:"my-card"},r.a.createElement("div",{className:"card auth-card input-field"},r.a.createElement("h2",{className:"brand-logo"},"Instagram"),r.a.createElement("input",{type:"text",placeholder:"email",value:o,onChange:function(e){return l(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"password",value:s,onChange:function(e){return m(e.target.value)}}),r.a.createElement("button",{className:"waves-effect waves-light btn 64b5f6 blue lighten-2 white-text",onClick:function(){fetch("/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:s})}).then((function(e){return e.json()})).then((function(t){t.error?b.a.toast({html:t.error,classes:"#ff1744 red accent-3"}):(b.a.toast({html:t.message,classes:"#ff1744 green accent-3"}),localStorage.setItem("jwt",t.token),localStorage.setItem("user",JSON.stringify(t.user)),e.push("/"),E({type:"SETUSER",payload:t.user}))}))}},"Login"),r.a.createElement("h6",null,r.a.createElement(f.b,{to:"/reset"},"Forgot Password  ?")),r.a.createElement("h5",null,r.a.createElement(f.b,{to:"/signup"},"Don't have an Account ?"))))},S=function(){var e=Object(n.useState)([]),t=Object(g.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(""),c=Object(g.a)(l,2),i=c[0],s=c[1],m=Object(n.useState)(""),d=Object(g.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(""),E=Object(g.a)(h,2),b=E[0],v=E[1],j=Object(u.c)((function(e){return e.user}));return Object(n.useEffect)((function(){fetch("/myposts",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){o(e.myposts)}))}),[i]),Object(n.useEffect)((function(){fetch("/userdata",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json().then((function(e){v(e)}))}))}),[i]),Object(n.useEffect)((function(){var e=new FormData;e.append("pic",p),console.log(e),y.a.post("/setprofilepic",e,{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){s(e.profilePic)}))}),[p]),r.a.createElement("div",{style:{maxWidth:"550px",margin:"0px auto"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",borderBottom:"1px solid grey"}},r.a.createElement("div",null,r.a.createElement("img",{style:{width:"160px",height:"160px",borderRadius:"80px"},src:b.profilePic}),r.a.createElement("form",null,r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn"},r.a.createElement("span",null,"set Profile Picture"),r.a.createElement("input",{type:"file",onChange:function(e){return f(e.target.files[0])}})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",type:"text"}))))),r.a.createElement("div",null,r.a.createElement("h4",null,j?j.name:"loading..."),r.a.createElement("h6",null,j?j.email:"loading..."),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",width:"108%"}},r.a.createElement("h6",null,a.length," posts"),r.a.createElement("h6",null,b.followers?b.followers.length:0," followers"),r.a.createElement("h6",null,b.following?b.following.length:0," following")))),r.a.createElement("div",{className:"gallery"},a.map((function(e){return r.a.createElement("img",{style:{height:"200px",justifyContent:"space-between",width:"150px",padding:"10px"},src:e.photo,alt:"photo"})}))))},x=function(){var e=Object(p.f)(),t=Object(n.useState)(""),a=Object(g.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(g.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(g.a)(m,2),f=d[0],h=d[1];return r.a.createElement("div",{className:"card",style:{margin:"30px auto",maxWidth:"500px",padding:"20px",textAlign:"center"}},r.a.createElement("form",{encType:"multipart/form-data"},r.a.createElement("input",{type:"text",placeholder:"Enter title",value:o,onChange:function(e){return l(e.target.value)}}),r.a.createElement("input",{type:"text",placeholder:"Enter body",value:s,onChange:function(e){return u(e.target.value)}}),r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn"},r.a.createElement("span",null,"Upload Image"),r.a.createElement("input",{type:"file",onChange:function(e){h(e.target.files[0])}})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",type:"text"}))),r.a.createElement("a",{className:" waves-effect waves-light btn \r\n#1e88e5 blue darken-1 white-text",onClick:function(){if(f){var t=new FormData;t.append("title",o),t.append("body",s),t.append("pic",f),console.log(t),y.a.post("/createpost",t,{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(t){console.log(t),b.a.toast({html:t.data.message,classes:"#ff1744 green accent-3"}),e.push("/")}))}}},"Submit Post")))},N=function(){var e=Object(u.c)((function(e){return e.user})),t=Object(n.useState)([]),a=Object(g.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(g.a)(c,2),s=(i[0],i[1]),m=Object(u.b)(),d=Object(p.f)();Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e?m({type:"SETUSER",payload:e}):d.location.pathname.startsWith("/reset")||d.push("/login")}),[]),Object(n.useEffect)((function(){fetch("/followeduserpost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),l(e.posts)}))}),[o]);return r.a.createElement("div",{className:"container"},o?o.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card home-card",key:t._id},r.a.createElement("h5",{style:{paddingTop:"10px",paddingBottom:"10px"}},r.a.createElement(f.b,{to:t.postedBy._id!==e._id?"/profile/".concat(t.postedBy._id):"/profile"},t.postedBy.name),t.postedBy._id==e._id&&r.a.createElement("i",{class:"material-icons",style:{float:"right"},onClick:function(){return e=t._id,void fetch("/deletepost/".concat(e),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var t=o.filter((function(t){return t._id!==e.result._id}));l(t),b.a.toast({html:e.message,classes:"#ff1744 red accent-3"})}));var e}},"delete")),r.a.createElement("div",{className:"card-image"},r.a.createElement("img",{style:{height:"500px"},src:t.photo,alt:""})),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",paddingTop:"5px"}},t.likes.includes(e._id)?r.a.createElement("i",{className:"material-icons",style:{color:"blue"},onClick:function(){var e;e=t._id,fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(t){var a=o.map((function(a){return e===t._id?t:a}));l(a)}))}},"thumb_down"):r.a.createElement("i",{className:"material-icons",onClick:function(){return e=t._id,void fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){var t=o.map((function(t){return t._id===e._id?e:t}));l(t)})).catch((function(e){return console.log(e)}));var e}},"thumb_up"),r.a.createElement("div",{style:{paddingLeft:"10px"}},t.favorites.includes(e._id)?r.a.createElement("i",{className:"material-icons",style:{color:"red"},onClick:function(){return e=t._id,void fetch("/removefromfavorite",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){b.a.toast({html:e.message,classes:"#ff1744 red accent-3"})}));var e}},"favorite"):r.a.createElement("i",{className:"material-icons",onClick:function(){return e=t._id,void fetch("/addtofavorite",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){s(!0),b.a.toast({html:e.message,classes:"#ff1744 green accent-3"})}));var e}},"favorite"))),r.a.createElement("h6",null,t.likes.length," Likes"),r.a.createElement("h6",null,t.title),r.a.createElement("p",null,t.body),t.comments.map((function(e){return r.a.createElement("h6",{key:e._id},r.a.createElement("span",{style:{fontWeight:"500"}},e.postedBy)," ",r.a.createElement("span",null," "),e.text)})),r.a.createElement("form",{onSubmit:function(e){var a,n;e.preventDefault(),a=e.target[0].value,n=t._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:n,text:a})}).then((function(e){return e.json()})).then((function(e){var t=o.map((function(t){return t._id===e._id?e:t}));l(t)}))}},r.a.createElement("input",{type:"text",placeholder:"add a comment"})))))})):"loading")},C=function(){var e=JSON.parse(localStorage.getItem("user")),t=Object(n.useState)(""),a=Object(g.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(g.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(null),d=Object(g.a)(m,2),f=d[0],h=d[1],E=Object(p.g)().userid;Object(n.useEffect)((function(){fetch("/user/".concat(E),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){h(e)}))}),[o,s]);return f?r.a.createElement("div",{style:{maxWidth:"550px",margin:"0px auto"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",borderBottom:"1px solid grey"}},r.a.createElement("div",null,r.a.createElement("img",{style:{width:"160px",height:"160px",borderRadius:"80px"},src:f.user.profilePic})),r.a.createElement("div",null,r.a.createElement("h4",null,f.user.name),r.a.createElement("h4",null,f.user.email),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",width:"108%"}},r.a.createElement("h6",null,f.posts.length," posts"),r.a.createElement("h6",null,f.user.followers?f.user.followers.length:0," followers"),r.a.createElement("h6",null,f.user.following?f.user.following.length:0," following")),f.user.followers.includes(e._id)?r.a.createElement("button",{className:"waves-effect waves-light btn 64b5f6 blue lighten-2 white-text",onClick:function(){fetch("/unfollow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({unfollowId:E})}).then((function(e){return e.json().then((function(e){u(e)}))}))}},"unfollow"):r.a.createElement("button",{className:"waves-effect waves-light btn 64b5f6 blue lighten-2 white-text",onClick:function(){fetch("/follow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:E})}).then((function(e){return e.json().then((function(e){l(e)}))}))}},"follow"))),r.a.createElement("div",{className:"gallery"},f.posts.map((function(e){return r.a.createElement("img",{style:{height:"30%",justifyContent:"space-between",width:"30%"},src:e.photo,alt:"photo"})})))):"loading"},_=function(){var e=Object(p.f)(),t=Object(n.useState)(""),a=Object(g.a)(t,2),o=a[0],l=a[1];Object(u.b)();return r.a.createElement("div",{className:"my-card"},r.a.createElement("div",{className:"card auth-card input-field"},r.a.createElement("h2",{className:"brand-logo"},"Instagram"),r.a.createElement("input",{type:"text",placeholder:"email",value:o,onChange:function(e){return l(e.target.value)}}),r.a.createElement("button",{className:"waves-effect waves-light btn 64b5f6 blue lighten-2 white-text",onClick:function(){fetch("/reset-password",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({email:o})}).then((function(e){return e.json()})).then((function(t){t.error?b.a.toast({html:t.error,classes:"#ff1744 red accent-3"}):(b.a.toast({html:t.message,classes:"#ff1744 green accent-3"}),e.push("/login"))}))}},"Reset Password"),r.a.createElement("h5",null,r.a.createElement(f.b,{to:"/signup"},"Don't have an Account ?"))))},I=function(){var e=Object(p.f)(),t=Object(n.useState)(""),a=Object(g.a)(t,2),o=a[0],l=a[1],c=(Object(u.b)(),Object(p.g)().token);return r.a.createElement("div",{className:"my-card"},r.a.createElement("div",{className:"card auth-card input-field"},r.a.createElement("h2",{className:"brand-logo"},"Instagram"),r.a.createElement("input",{type:"password",placeholder:"Enter a new password",value:o,onChange:function(e){return l(e.target.value)}}),r.a.createElement("button",{className:"waves-effect waves-light btn 64b5f6 blue lighten-2 white-text",onClick:function(){fetch("/new-password",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({newPassword:o,sentToken:c})}).then((function(e){return e.json()})).then((function(t){t.error?b.a.toast({html:t.error,classes:"#ff1744 red accent-3"}):(b.a.toast({html:t.message,classes:"#ff1744 green accent-3"}),e.push("/login"))}))}},"Update Password"),r.a.createElement("h5",null,r.a.createElement(f.b,{to:"/signup"},"Don't have an Account ?"))))},k=function(){return r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:N}),r.a.createElement(p.a,{path:"/signup",component:w}),r.a.createElement(p.a,{exact:!0,path:"/allposts",component:v}),r.a.createElement(p.a,{path:"/login",component:O}),r.a.createElement(p.a,{exact:!0,path:"/profile",component:S}),r.a.createElement(p.a,{path:"/create",component:x}),r.a.createElement(p.a,{path:"/profile/:userid",component:C}),r.a.createElement(p.a,{exact:!0,path:"/reset",component:_}),r.a.createElement(p.a,{path:"/reset/:token",component:I}))};var B=function(){return r.a.createElement(f.a,null,r.a.createElement(h,null),r.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(r.a.createElement(u.a,{store:s},r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.287b33b1.chunk.js.map